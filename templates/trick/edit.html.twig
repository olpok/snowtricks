{% extends 'base.html.twig' %}

{% block title %}Edit Trick{% endblock %}

{% block body %}
<div class="container">
    <h1>Edit Trick</h1>
    {% for message in app.flashes('success') %}
    <div class="alert alert-success">
        {{message}}
    </div>
    {% endfor %}
    <div>
        <h5>Images</h5>
        {% for image in trick.images %}
        <div class="col-md-5" style="width:100 px; flex: none; margin: 5px">
            <img src="{{vich_uploader_asset(image,'imageFile') }} " width="100" alt="">
            <form method="post" action="{{ path('image_delete', {'id': image.id}) }}"
                onsubmit="return confirm('Êtes-vous vraiment sûr ?');">
                <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ image.id) }}">
                <button class="btn">Supprimer</button>
            </form>
        </div>
        {% endfor %}
    </div>
    <div class="col-md-5">
        <h5>Urls</h5>                             
        {% for video in trick.videos %}

        {% if video.url and embedUrl is defined %}
        
        {{ video.url }}
        {{ embedUrl }}
                <div class="col" style="width:100 px; flex: none; margin: 5px">     
                    <iframe width="220" height="140s" src="{{ embedUrl }}" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    
                    {#           <form method="post" action="{{ path('video_delete', {'id': video.id}) }}"
                                    onsubmit="return confirm('Êtes-vous vraiment sûr ?');">
                                    <input type="hidden" name="_token" value="{{ csrf_token('delete' ~ video.id) }}">
                                    <button class="btn">Supprimer</button>
                                </form>#}
                </div>
        {% else %}
        <h3>futur url</h3>
         {% endif %}
        {% endfor %}                 
        
    </div>


    {{ form_start(form) }}
    <div class="col-md-10">{{ form_row(form.name) }}</div>
    <div class="col-md-10">{{ form_row(form.description) }}</div>
    <div class="col-md-10">{{ form_row(form.category) }}</div>
    <div class="col-md-10">{{ form_row(form.imageFiles) }}</div>

    {{ form_rest(form) }}

    <button class="btn">{{ button_label|default('Enregistrer') }}</button>
    {{ form_end(form) }}


    <a href="{{ path('trick_index') }}">retour à la liste</a>

    {{ include('trick/_delete_form.html.twig') }}
</div>

{% endblock %}